<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>NewGradPositions</title>
  <!-- Bootstrap Core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <!-- Custom CSS -->
  <link href="css/agency.css" rel="stylesheet">
  <!-- Custom Fonts -->
  <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react-dom.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.15/browser.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.2/marked.min.js"></script>


</head>

<body id="page-top" class="index">
  <!-- Google Tag Manager -->
  <noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-M6SM3W" height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>
  <script>
    (function(w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
      });
      var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != 'dataLayer' ? '&l=' + l : '';
      j.async = true;
      j.src =
        '//www.googletagmanager.com/gtm.js?id=' + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-M6SM3W');
  </script>
  <!-- End Google Tag Manager -->
  <!-- Navigation -->
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header page-scroll">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand page-scroll" href="#page-top">New Grad Careers</a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li class="hidden">
            <a href="#page-top"></a>
          </li>
          <li>
            <a class="page-scroll" href="#companies">Companies</a>
          </li>
          <li>
            <a class="page-scroll" href="#contact">Contact</a>
          </li>
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
  </nav>
  <!-- Header -->
  <header>
    <div  class="container">
      <div id="home" class="intro-text">
        <div class="intro-lead-in">New Grads !</div>
        <div class="intro-heading">You miss 100% of the shots you don't take.</div>
        <a href="#companies" class="page-scroll btn btn-xl">Bring it on</a>
      </div>
    </div>
  </header>
  <!--#companies Section -->
  <section id="ReactContent" class="text-center">
  </section>

  <!-- Contact Section -->
  <section id="contact">
    <div class="container">
      <div class="row">
        <div class="col-lg-12 text-center">
          <h2 class="section-heading">Know more companies? Let us know.</h2>
          <h3 class="section-subheading text-muted">[Under Construction]</h3>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-12">
          <form name="sentMessage" id="contactForm" novalidate>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <input type="text" class="form-control" placeholder="Your Name *" id="name" required data-validation-required-message="Please enter your name.">
                  <p class="help-block text-danger"></p>
                </div>
                <div class="form-group">
                  <input type="email" class="form-control" placeholder="Your Email *" id="email" required data-validation-required-message="Please enter your email address.">
                  <p class="help-block text-danger"></p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <textarea class="form-control" placeholder="Your Message *" id="message" required data-validation-required-message="Please enter a message."></textarea>
                  <p class="help-block text-danger"></p>
                </div>
              </div>
              <div class="clearfix"></div>
              <div class="col-lg-12 text-center">
                <div id="success"></div>
                <button type="submit" class="btn btn-xl">Send Message</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <span class="copyright">New Grad Careers </span>
        </div>
        <div class="col-md-4">
          <ul class="list-inline social-buttons">
            <li><a href="#"><i class="fa fa-twitter"></i></a>
            </li>
            <li><a href="#"><i class="fa fa-facebook"></i></a>
            </li>
            <li><a href="#"><i class="fa fa-linkedin"></i></a>
            </li>
          </ul>
        </div>
        <div class="col-md-4">
          <ul class="list-inline quicklinks">
            <li><a href="#">Privacy Policy</a>
            </li>
            <li><a href="#">Terms of Use</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </footer>

  <!-- jQuery -->
  <script src="js/jquery.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script src="js/bootstrap.min.js"></script>
  <!-- Plugin JavaScript -->
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
  <script src="js/classie.js"></script>

  <script src="js/cbpAnimatedHeader.js"></script>
  <!-- Contact Form JavaScript -->
  <script src="js/jqBootstrapValidation.js"></script>
  <script src="js/contact_me.js"></script>
  <!-- Custom Theme JavaScript -->
  <script src="js/agency.js"></script>
  <script src="js/jquery.csv.min.js"></script>
  <script src="https://code.jquery.com/ui/jquery-ui-git.js"></script>

  <script src="js/jquery.sausage.js"></script>
    <script src="js/commentBox.jsx"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/react-bootstrap/0.28.2/react-bootstrap.min.js"></script> -->
<!-- <script>
  var Alert = ReactBootstrap.Alert;
</script> -->
  <!-- <script type="text/javascript">
    // $(window).sausage();
    //   var data;
    var pages = [],
      ran = 5,
      $pages = $('#companieslist'),
      i = 0,
      index = 0,
      loading = false;

    function addPage() {
      $pages
        .append('<div class="col-md-12 panel panel-default"> <a href="https://www.google.com/#q=' + data[index] + '+jobs+graduate" target="_blank"> <h4 class="service-heading">' + data[index] + '</h4> </div>');
      index++;
    };

    //loading data
    $.ajax({
      url: "positions.csv",
      async: true,
      success: function(csvd) {
        data = $.csv2Array(csvd);
      },
      dataType: "text",
      complete: function() {
        // call a function on complete
        window.data = data;
        for (i = 0; i < data.length; i++) {
          addPage();
        }
      }
    });
  </script> -->

  <script type="text/babel">

  var data;
    var Company = React.createClass({
      getInitialState:function(){
        return {color:'col-xs-12 col-md-6 page-scroll panel panel-default'};
      },
      onCompanyClick: function(evt){
        if(evt.target.tagName=="DIV" || evt.target.tagName=="H4")
        this.props.onSelect(this.props.name);

        // this.setState({color:'panel panel-default'});
        // location.href='#team?name='+evt.target.id;
        // $('#team').removeClass("hidden");
        // $('#companies').addClass("hidden");
        // $('#contact').addClass("hidden");
        $('html, body').animate({
                   scrollTop: $("#companies").offset().top
               }, 200);
      },
      render:function(){
        var btnNewgrad;
        if(this.props.newgrad){
          btnNewgrad = <a href={this.props.newgrad} target="_blank" className="btn btn-primary btn-sm">New Grad </a>
        }
        return(
            <div className={this.state.color} id="companyItem"   onClick={this.onCompanyClick}>
              <div className='panel-heading clearfix' id={this.props.id}>
                  <h4 className="panel-title pull-left">{this.props.name}</h4>

                <div className=" btn-group pull-right vertical-center">
                  {btnNewgrad}
                  <a href={this.props.careers} target="_blank" className="btn btn-info btn-sm">Careers</a>
                </div>
                </div>
            </div>
        );
      }
    });

    var CompaniesList = React.createClass({


      render: function(){
        var self = this;
        var companyNodes = this.props.data.map(function(company){
          return (
            <Company onSelect={self.props.onSelect} key={company[0]} name={company[1]} id={company[0]} careers={company[2]} newgrad={company[3]}/>
          )
        });
        return(
          <div className="companiesList">

         {companyNodes}

          </div>
        );
      }
    });

    var CompanyBox = React.createClass({
      getInitialState:function(){
        return {initialData:[],data:[]};
      },
      filterList: function(event){
        var updatedList = this.state.initialData;
        updatedList = updatedList.filter(function(item){
          //console.log(item);
          console.log(  event.target.value.toLowerCase());
          return item[1].toLowerCase().startsWith(
            event.target.value.toLowerCase());
          });
          this.setState({data: updatedList});
        },
      componentDidMount: function(){
        $.ajax({
          url: this.props.url,
          async: true,
          success: function(csvd) {
            data = $.csv2Array(csvd);
          }.bind(this),
          dataType: "text",
          complete: function() {
            // call a function on complete
            this.setState({initialData:data});
            this.setState({data:data});
          }.bind(this)
        });
      },
      render: function(){
        return(
          <div className="container">

            <div className="text-center">
              <h2 className="section-heading">Companies</h2>
              <h3 className="section-subheading text-muted">List of companies with Engineering positions <br/><hr/> Did you know that most of the companies have separate page for new grads to apply ? Here is the list for you. </h3>
            </div>


          <div className="form-group" >
            <input type="text" className="form-control" placeholder="Search" onChange={this.filterList}/>
            </div>
            <CompaniesList data={this.state.data} onSelect={this.props.onSelect}/>
          </div>
        );
      }
    });

  var posts = [];

// building company statep
  var CompanySpace = React.createClass({
    backToListClick:function(){
      this.props.onBack();
    },
    render: function(){
      return(
        <div className="container">
          <div className="row">
            <div id="btnBackToList" className="well col-md-3 col-lg-2 btn btn-defult"  onClick={this.backToListClick}>
                    <span className="glyphicon glyphicon-arrow-left"></span> Back
            </div>
          </div>
          <div className="row">
                <div className="col-lg-12 text-center">
                    <h2 className="section-heading">{this.props.name}</h2>
                      <h3 className="section-subheading text-muted"></h3>
                </div>
          </div>
          <div className="row">
                <CommentBox  posts={posts} />
          </div>
        </div>
      );
    }
  });

  var Playground = React.createClass({
    getInitialState: function(){
      return { flag:"showList", company:""};
    },
    handleSelect: function(i){
      this.setState({flag:"showCompany", company:i});
    },
    getBack: function(i){
      this.setState({flag:"showList", company:""});
    },
    render: function(){
      if(this.state.flag=="showList")
      return(
          <CompanyBox onSelect={this.handleSelect} url="positions.csv" />
      );
      else
      return(
        <CompanySpace name={this.state.company} onBack={this.getBack}> </CompanySpace>
      );
    }
  });




  var CommentBox = React.createClass({
    getInitialState: function() {
      return {posts: []};
    },
    componentDidMount: function(){
      this.setState({posts:posts});
    },
    handleCommentSubmit: function(comment) {
     // TODO: submit to the server and refresh the list
       var comments = this.state.posts;
       comment.id = Date.now();
       var newComments = comments.concat(comment);
       this.setState({posts: newComments});
   },
    render: function() {
      return (
        <div className="panel panel-info">
          <div className="col-lg-12 well panel-heading"><h2> Comments</h2> </div>
          <div className="panel-body">
            <CommentForm onCommentSubmit={this.handleCommentSubmit}/>
            <hr/>
            <CommentList posts={this.state.posts} />

          </div>
        </div>
      );
    }
  });


  var CommentList = React.createClass({
    render: function() {
      var sortedNodes =  this.props.posts.sort(function(a, b) {
        return (a.id - b.id);
      }).reverse();
      var commentNodes = sortedNodes.map(function(comment) {
        console.log(comment);
      return (

        <Comment author={comment.author} key={comment.id}>
          {comment.text}
        </Comment>

      );
    });
      return (
        <div className="commentList">
        <ul className="media-list">
          {commentNodes}
       </ul>
     </div>
      );
    }
  });

  var CommentForm = React.createClass({
    getInitialState: function() {
      return {author: '', text: ''};
    },
    handleAuthorChange: function(e) {
      this.setState({author: e.target.value});
    },
    handleTextChange: function(e) {
      this.setState({text: e.target.value});
    },
    handleSubmit: function(e) {
       e.preventDefault();
       var author = this.state.author.trim();
       var text = this.state.text.trim();
       if (!text || !author) {
         return;
       }
       // TODO: send request to the server
       this.props.onCommentSubmit({author: author, text: text});
       this.setState({author: '', text: ''});
     },
    render: function() {
      return (
        <form className="commentForm form-group" onSubmit={this.handleSubmit}>
        <div className="row" style={{padding:10+'px'}}><div className="col-lg-12">
        <h3>UNDER CONSTRUCTION</h3>
        <textarea
            rows="3"
            className ="form-control"
            placeholder="Enter here ..."
            value={this.state.text}
            onChange={this.handleTextChange}
          /></div>
          </div><div className="row" style={{padding:10+'px'}}>
          <div className="col-lg-12">
          <input
            className ="form-control"
            type="text"
            placeholder="Name"
            value={this.state.author}
            onChange={this.handleAuthorChange}
          />
          </div></div><div className="row"><div className="col-lg-12">
       <input type="submit" className= "btn btn-primary btn-lg" value="Post" /></div></div>
     </form>
      );
    }
  });

  var Comment = React.createClass({
  render: function() {
    return (
      <li >
      <div className="panel">
      <div className="comment media-body">
        <strong className="commentAuthor text-success">
          @{this.props.author}
        </strong>
        <p>{this.props.children}</p>
      </div>
      </div>
      </li>
    );
  }
});

   ReactDOM.render(
      <Playground />,
      document.getElementById('ReactContent')
    );


  </script>

</body>

</html>
